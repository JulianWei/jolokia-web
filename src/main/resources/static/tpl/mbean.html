<div class="col-sm-3 col-md-2 sidebar">
    <div class="input-group">
        <span class="input-group-addon">
            <i class="fa fa-search" aria-hidden="true"></i>
        </span>
        <input type="text" class="form-control" ng-model="searchTree" placeholder="Search for MBean...">
        <span class="input-group-btn">
            <button class="btn btn-default" type="button"><i class="fa fa-trash-o" aria-hidden="true" ng-click="searchTree = ''"></i></button>
        </span>
    </div>
    <div style="margin-top:15px;"
        data-angular-treeview="true"
        data-tree-model="tree"
        data-tree-id="beanTree"
        data-node-id="id"
        data-node-label="name"
        data-node-children="children" >
    </div>
</div>

<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">

    <div class="loading" ng-show="loading">
        <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>
    </div>

    <div ng-show="error && !loading" class="alert alert-danger" role="alert">
        <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> {{error}}
    </div>

    <div ng-hide="error || loading || beanTree.currentNode" class="alert alert-info" role="alert">
        <i class="fa fa-info-circle" aria-hidden="true"></i> No MBean selected...
    </div>

    <uib-tabset active="active" ng-show="beanTree.currentNode">
        <uib-tab index="0" select="getBeanValue()">
            <uib-tab-heading>
                <i class="fa fa-file-text-o"></i> Attributes
            </uib-tab-heading>

            <div>
                <h2 class="sub-header">Info</h2>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <tr>
                            <td>Class</td>
                            <td>{{beanTree.currentNode.class}}</td>
                        </tr>
                        <tr>
                            <td>Description</td>
                            <td>{{beanTree.currentNode.desc}}</td>
                        </tr>
                    </table>
                </div>
            </div>


            <div ng-show="!beanTree.currentNode.attr" class="alert alert-info" role="alert">
                <i class="fa fa-info-circle" aria-hidden="true"></i> This MBean has no attributes...
            </div>

            <div ng-if="beanTree.currentNode" ng-show="beanTree.currentNode.attr">
                <h2 class="sub-header">Attributes <button class="btn btn-primary btn-xs" ng-click="getBeanValue()" ng-disabled="beanLoading"><i class="fa fa-refresh" ng-class="{'fa-spin': beanLoading}"></i> Reload</button></h2>
                <table class="table table-responsive table-striped" ng-hide="beanLoading">
                    <thead>
                    <tr>
                        <th style="width:100px">
                            <button class="btn btn-warning btn-xs btn-search" ng-class="{'btn-danger': showSearchAttribute}" ng-click="showSearchAttribute = !showSearchAttribute"><i class="fa fa-search"></i> Search</button>
                        </th>
                        <th>Attribute</th>
                        <th>Value</th>
                        <th>Type</th>
                        <th>Description</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-show="showSearchAttribute">
                        <td colspan="5">
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <i class="fa fa-search"></i>
                                </span>
                                <input type="text" class="form-control" ng-model="searchAttribute" placeholder="Search for attribute...">
                                <span class="input-group-btn">
                                    <button class="btn btn-default" type="button" ng-click="searchAttribute = ''"><i class="fa fa-trash-o" aria-hidden="true"></i></button>
                                </span>
                            </div>
                        </td>
                    </tr>
                    <tr ng-repeat="attr in beanTree.currentNode.attr | filter:{name:searchAttribute,desc:searchAttribute} | orderBy:'name'">
                        <td><edit-attribute-button bean="beanTree.currentNode" attr="attr"></edit-attribute-button></td>
                        <td>{{attr.name}}</td>
                        <td><value-inspector my-value="attr.value"></value-inspector></td>
                        <td>{{attr.type}}</td>
                        <td>{{attr.desc}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </uib-tab>

        <uib-tab index="1">
            <uib-tab-heading>
                <i class="fa fa-gears"></i> Operations
            </uib-tab-heading>

            <div ng-show="!beanTree.currentNode.op" class="alert alert-info" role="alert">
                <i class="fa fa-info-circle" aria-hidden="true"></i> This MBean has no operations...
            </div>

            <div ng-if="beanTree.currentNode.op">
                <h2 class="sub-header">Operations</h2>
                <div class="table-responsive" ng-if="beanTree.currentNode">
                    <table class="table table-striped operation-table">
                        <thead>
                        <tr>
                            <th style="width:100px">
                                <button class="btn btn-warning btn-xs btn-search" ng-class="{'btn-danger': showSearchOperation}" ng-click="showSearchOperation = !showSearchOperation"><i class="fa fa-search"></i> Search</button>
                            </th>
                            <th>Function</th>
                            <th>ReturnType</th>
                            <th>Description</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-show="showSearchOperation">
                            <td colspan="4">
                                <div class="input-group">
                                    <span class="input-group-addon">
                                        <i class="fa fa-search"></i>
                                    </span>
                                    <input type="text" class="form-control" ng-model="searchOperation" placeholder="Search for function...">
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" type="button" ng-click="searchOperation = ''"><i class="fa fa-trash-o" aria-hidden="true"></i></button>
                                    </span>
                                </div>
                            </td>
                        </tr>
                        <tr ng-repeat="o in beanTree.currentNode.op | filter:{name:searchOperation,desc:searchOperation} | orderBy:'name'">
                            <td><execute-button bean="beanTree.currentNode" operation="o"></execute-button></td>
                            <td>{{o.name}} <span class="badge" ng-repeat="ar in o.args">{{ar.name}}:{{ar.type}}</span></td>
                            <td>{{o.ret}}</td>
                            <td>{{o.desc}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </uib-tab>
    </uib-tabset>
</div>